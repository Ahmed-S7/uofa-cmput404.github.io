<!DOCTYPE html>
<html lang="en">
<head>
          <title>CMPUT 404 - HTTP Lab</title>
        <meta charset="utf-8" />
        <meta name="generator" content="Pelican" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Web Applications and Architecture" />

  <link rel="icon" href="../theme/favicon.ico" />
  <link rel="stylesheet" type="text/css" href="../theme/style.css" />
  <link rel="stylesheet" type="text/css" href="../theme/404.css" />




    <meta name="tags" content="curl" />
    <meta name="tags" content="http" />
    <meta name="tags" content="socket" />
    <meta name="tags" content="socketserver <!-- @LT-IGNORE:MORFOLOGIK_RULE_EN_CA(http)@ -->" />

</head>

<body>
        <header>
              <hgroup><h1><a href="../">CMPUT 404</a></h1><p>Web Applications and Architecture</p></hgroup>
        <nav><ul>
            <li><a href="/general/outline.html">Outline</a></li>
            <li><a href="/#eclass">eClass & Grades</a></li>
            <li><a href="/#schedule">Schedule</a></li>
            <li><a href="/general/labs.html">Labs</a></li>
            <li><a href="/general/project.html">Project</a></li>
            <li><a href="/general/individual.html">Participation</a></li>
            <li><a href="/general/resources.html">Resources</a></li>
            <li><a href="/general/help.html#discussion-forum">Discussion Forum</a></li>
            <li><a href="/#news-notices">News & Notices</a></li>
            <li><a href="/#lecture-zoom">Lecture Zoom</a></li>
            <li><a href="https://uofa-cmput404.github.io/slides-xt/">Slides</a></li>
            <li><a href="/general/help.html">Help</a></li>
        </ul></nav>
        </header>
        <main>
<article>
  <header>
    <h2>
      <a href="../labsignments/http.html" rel="bookmark"
         title="Permalink to HTTP Lab">HTTP Lab</a></h2>
 
  </header>
  <hr>
<div class="toc">
<ul>
<li><a href="#description">Description</a></li>
<li><a href="#getting-started">Getting Started</a></li>
<li><a href="#collaboration">Collaboration</a></li>
<li><a href="#user-stories">User Stories</a></li>
<li><a href="#task-1-implement-the-http-client">Task 1: Implement the HTTP Client</a><ul>
<li><a href="#client-requirements">Client Requirements</a></li>
<li><a href="#import-the-python-socket-module">Import the python socket module</a></li>
<li><a href="#create-a-context-manager">Create a context manager</a></li>
<li><a href="#correctly-parse-url">Correctly parse URL</a></li>
<li><a href="#connect-to-a-remote-socket-at-specified-address">Connect to a remote socket at specified address</a></li>
<li><a href="#prepare-your-request">Prepare your request</a></li>
<li><a href="#pass-your-request-byte-as-a-parameter-to-socketsendall-function">Pass your request byte as a parameter to socket.sendall function</a></li>
<li><a href="#process-and-receive-response">Process and receive response</a></li>
</ul>
</li>
<li><a href="#task-2-implement-the-http-server">Task 2: Implement the HTTP Server</a><ul>
<li><a href="#server-requirements">Server Requirements</a></li>
<li><a href="#import-the-libraries-needed-socketserver-and-pathlib">Import the libraries needed (socketserver and pathlib)</a></li>
<li><a href="#create-a-custom-server-class-to-inherit-from-the-tcpserver-class">Create a custom server class to inherit from the TCPServer class</a></li>
<li><a href="#create-the-custom-httphandler-class">Create the custom HttpHandler class</a></li>
<li><a href="#implement-the-handle-method">Implement the handle method</a><ul>
<li><a href="#receive-and-decode-request">Receive and decode request</a></li>
<li><a href="#extract-the-method-and-path-from-the-request-line">Extract the method and path from the request line</a></li>
<li><a href="#extract-the-headers-and-store-in-a-dictionary">Extract the headers and store in a dictionary</a></li>
<li><a href="#decide-the-action-to-take-based-on-the-http-method-type">Decide the action to take based on the Http method type</a></li>
</ul>
</li>
<li><a href="#start-the-server">Start the server</a></li>
</ul>
</li>
<li><a href="#task-3-testing">Task 3: Testing</a><ul>
<li><a href="#scenario-1-ensure-that-your-custom-client-can-send-requests-to-your-custom-server-and-receive-the-expected-response">Scenario 1 : Ensure that your custom client can send requests to your custom server and receive the expected response</a></li>
<li><a href="#scenario-2-verify-that-your-custom-client-can-interact-with-standard-servers-correctly-sending-requests-and-processing-responses">Scenario 2: Verify that your custom client can interact with standard servers, correctly sending requests and processing responses.</a></li>
<li><a href="#scenario-3-ensure-that-standard-clients-web-browsers-postman-curl-can-communicate-with-your-custom-server-and-receive-the-correct-responses">Scenario 3: Ensure that standard clients (web browsers, Postman, curl) can communicate with your custom server and receive the correct responses.</a></li>
<li><a href="#hints">Hints</a></li>
</ul>
</li>
<li><a href="#restrictions">Restrictions</a></li>
<li><a href="#submission-instructions">Submission Instructions</a></li>
<li><a href="#tips">Tips</a><ul>
<li><a href="#ubuntu-on-windows">Ubuntu on Windows</a></li>
<li><a href="#ubuntu-on-macos-arm">Ubuntu on macOS ARM:</a></li>
<li><a href="#for-macos-with-homebrew">For macOS with homebrew:</a></li>
<li><a href="#for-windows-10-with-pip">For Windows 10 with pip:</a></li>
<li><a href="#ubuntu-lab-computers">Ubuntu Lab Computers</a></li>
</ul>
</li>
</ul>
</div>
<hr>
<h3 id="description">Description</h3>
<p>Your task is to build an HTTP/1.1 compliant webserver and a basic HTTP client. This lab is designed to give you a hands-on, ground-up understanding of the basics of HTTP by implementing both the client and server sides.</p>
<p>The webserver will serve static content from the <code>www</code> directory in the same directory where you start the webserver. The client will be used to make HTTP requests to the server or any HTTP/1.1 server.</p>
<h3 id="getting-started">Getting Started</h3>
<ol>
<li>Clone the GitHub classroom repository from eClass.</li>
<li>Follow the instructions below to implement the client and server.</li>
</ol>
<h3 id="collaboration">Collaboration</h3>
<ul>
<li>You may consult with others (exchange high-level ideas) but the submission should be your own source code.</li>
<li>Collaboration must be documented in your source code.</li>
<li>Any source code you got from anywhere else must be cited in the source code.</li>
<li>You can only use source code that <strong>you understand</strong>: see the <a href="../general/labs.html#lab-marking">lab marking info</a></li>
<li><strong>Yes, the instructors and TAs are all aware that ChatGPT can solve this assignment.</strong><ul>
<li>There are also plenty of solutions all over the internet... that's the reason ChatGPT can solve it.</li>
<li>You are not being graded on your ability to use an LLM or google for a solution. Instead, you are being graded on your ability to understand how HTTP and network communications work.</li>
<li>If you cannot explain your solution to the TA and instructor, you will get a mark of zero.</li>
<li>If you use code from a LLM "AI" or from somewhere else, you must cite it, or you will be written up for plagiarism. See the outline for how to cite it.</li>
<li>Here are the only code you don't have to cite:<ul>
<li>Code from this course's slides</li>
<li>The starter code from GitHub Classroom</li>
<li>Code written by an instructor or TA and hosted on this website: <code>uofa-cmput404.github.io</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="user-stories">User Stories</h3>
<ul>
<li>As a user, I want to view files in <code>./www</code> via a web browser and curl to see and test my website.</li>
<li>As a webserver admin, I want to serve HTML and CSS files from <code>./www</code> and deeper to avoid dealing with other file types and to enhance security.</li>
<li>As a user, I want the client to send an HTTP request to the server, so I can receive the appropriate response based on the request method</li>
<li>As a developer, I want my custom client to interact with a standard server and my custom server to interact with a standard client. My custom client should also be able to interact with my custom server.</li>
</ul>
<h3 id="task-1-implement-the-http-client">Task 1: Implement the HTTP Client</h3>
<h4 id="client-requirements">Client Requirements</h4>
<ul>
<li>A single python program called <code>httpclient.py</code></li>
<li>Run it by using a command like:<ul>
<li><code>httpclient.py GET http://servername:port/path</code></li>
<li>or <code>httpclient.py GET http://127.0.0.1:port/path</code> (or another ipv4 address)</li>
<li>or <code>httpclient.py GET http://[::1]:port/path</code> (or another ipv6 address)</li>
<li>or <code>httpclient.py POST http://servername:port/path</code> (or an ipv4/ipv6 address)</li>
</ul>
</li>
<li>Connect to a server at an address and port specified on the command line.</li>
<li>Send request with appropriate headers.</li>
<li>Receive and process responses from the server.</li>
<li>Implement basic HTTP GET</li>
<li>Implement basic HTTP POST</li>
<li>HTTP POST can post vars</li>
<li>HTTP POST handles at least Content-Type: application/x-www-form-urlencoded</li>
<li>Handle 404 requests and 200 requests</li>
<li>Handle a wider range of status codes (e.g., 301 for redirects, 500 for server errors) and act accordingly</li>
<li>Support virtual hosting by correctly setting the Host header in GET and POST requests</li>
<li>Pass the free-tests</li>
</ul>
<p>To make your client communicate with the server, follow these steps:
  - Import the libraries needed (socket)
  - Create a Context Manager
  - Connect to server and send request
  - Receive and Process Responses</p>
<ul>
<li>Client must have a <code>HTTPClient</code> class with a <code>command(self, method, url, args)</code> method.<ul>
<li><code>method</code> will be <code>'GET'</code> or <code>'POST'</code></li>
<li><code>url</code> will be a url including path, but not including query arguments or fragment</li>
<li><code>args</code> will be a dict<ul>
<li>This should become the query args for <code>GET</code></li>
<li>This should become the posted body for <code>POST</code></li>
</ul>
</li>
<li><code>command</code> method should return an <code>HTTPResponse</code></li>
</ul>
</li>
<li>Client must have a <code>HTTPResponse</code> class .<ul>
<li>It must have a <code>code</code> attribute which is an <code>int</code> response code like <code>200</code> for OK.</li>
<li>It must have a <code>body</code> attribute which is a <code>str</code> containing just the body. No headers.</li>
</ul>
</li>
</ul>
<h4 id="import-the-python-socket-module">Import the python socket module</h4>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">socket</span>
</code></pre></div>

<h4 id="create-a-context-manager">Create a context manager</h4>
<p>Create a context manager to ensure you close the socket once the block of code is executed.
Utilize the context manager on the socket module to create a new socket object. This object has an overloaded constructor. The two arguments to the constructor are the address family and the socket type. (i.e. socket.AF_INET and socket.SOCK_STREAM)</p>
<ol>
<li>socket.AF_INET : represents the address type (for IPv4, IPv6, and DNS names)</li>
<li>socket.SOCK_STREAM : represents the socket type (TCP socket)</li>
</ol>
<h4 id="correctly-parse-url">Correctly parse URL</h4>
<ol>
<li>Make sure it starts with <code>http://</code> or stop with an error.<ul>
<li>We do not support HTTPS in this lab.</li>
</ul>
</li>
<li>Separate the IP address, port, and path.<ul>
<li>If the port is not specified, use the default port 80.</li>
<li>If the IP address is a IPv6 address, remove the square brackets around it.</li>
</ul>
</li>
<li>If it is a GET request, the params need to made into query parameters.<ul>
<li>If it is a POST request the params should become the post body instead, and they should not be added to the query parameters.</li>
</ul>
</li>
<li>The path and query params must be correctly percent encoded.</li>
</ol>
<h4 id="connect-to-a-remote-socket-at-specified-address">Connect to a remote socket at specified address</h4>
<p>Connect to a remote socket at specified address. This uses the socket.connect(address) method to connect with the host address. The address is a tuple that holds the host or IP address and the port number of the server</p>
<div class="highlight"><pre><span></span><code><span class="k">with</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span><span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span> <span class="k">as</span> <span class="n">sock</span><span class="p">:</span>
   <span class="n">sock</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="n">HOST</span><span class="p">,</span><span class="n">PORT</span><span class="p">))</span>
   <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;connected to server at host </span><span class="si">{</span><span class="n">HOST</span><span class="si">}</span><span class="s2"> and port </span><span class="si">{</span><span class="n">PORT</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h4 id="prepare-your-request">Prepare your request</h4>
<p>This would be correctly formatted to include the HTTP method, protocol, Host address, Content-Type and Content length and finally the data.</p>
<ul>
<li>Hint: don't forget the headers end with a blank line!</li>
</ul>
<h4 id="pass-your-request-byte-as-a-parameter-to-socketsendall-function">Pass your request byte as a parameter to socket.sendall function</h4>
<p>Call the sendall function that accepts raw bytes to send the request to the server. Remember data is transmitted as bytes over the internet  and not strings. To convert the request string message to a byte, you encode the request using the utf-8 encoding.</p>
<div class="highlight"><pre><span></span><code><span class="n">sock</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
</code></pre></div>

<h4 id="process-and-receive-response">Process and receive response</h4>
<p>The "read_response" function reads the entire HTTP response from a server after a request has been made through a socket connection. It converts the socket into a file-like object (sock_file) using the makefile('rb') method, which allows the response to be read as raw bytes. The makefile() method simplifies the process of reading from and writing to the socket by providing file-like methods (read, write, etc.), making it easier to handle network communication. The function reads all the data from the server in one go and stores it in a byte string called response. Finally, it returns this byte string, containing the full response, including headers and any accompanying data, such as HTML content or binary files. </p>
<div class="highlight"><pre><span></span><code><span class="c1"># Receive the response</span>
   <span class="k">def</span> <span class="nf">read_response</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">makefile</span><span class="p">(</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">sock_file</span><span class="p">:</span>  
            <span class="n">response</span> <span class="o">=</span> <span class="n">sock_file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">response</span>
</code></pre></div>

<h3 id="task-2-implement-the-http-server">Task 2: Implement the HTTP Server</h3>
<h4 id="server-requirements">Server Requirements</h4>
<ul>
<li>Serve files from <code>./www</code>.</li>
<li>Serve HTML and CSS files correctly with appropriate <code>Content-Type</code> headers.</li>
<li>Serve <code>index.html</code> when directories (paths ending in <code>/</code>) are accessed.</li>
<li>Serve 404 errors for non-existent paths.</li>
<li>Serve a <code>405 Method Not Allowed</code> response for unsupported HTTP methods (like POST, PUT, DELETE).</li>
<li>Use a <code>301 Moved Permanently</code> redirect for directory paths not ending in <code>/</code>.</li>
<li>Serve files properly with Firefox and Chromium-based browsers.</li>
<li>Serve CSS correctly so that the front page has an orange <code>h1</code> header.</li>
<li>Tests must execute within 60 seconds.</li>
<li>The server must be started by calling the <code>main</code> function.</li>
<li>The server must handle requests from both custom and standard clients.</li>
<li>The server must correctly percent decode incoming paths.</li>
<li>Pass the free-tests</li>
</ul>
<p>Getting your server to talk to a client involves the following steps</p>
<ul>
<li>Import the libraries needed (socketserver and pathlib)</li>
<li>Create a custom server class to inherit from the TCPServer class</li>
<li>Create the custom HttpHandler class</li>
<li>
<p>Implement the handle method</p>
<ul>
<li>Receive and decode request</li>
<li>Extract the method and path from the request line</li>
<li>Extract the headers and store in a dictionary</li>
<li>Decide the action to take based on the Http method type</li>
</ul>
</li>
<li>
<p>Start the server </p>
</li>
</ul>
<h4 id="import-the-libraries-needed-socketserver-and-pathlib">Import the libraries needed (socketserver and pathlib)</h4>
<p>The socketserver provides simplicity for creating network servers in python. The pathlib module is useful for managing filesystem path</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">socketserver</span>
<span class="kn">import</span> <span class="nn">pathlib</span>
</code></pre></div>

<h4 id="create-a-custom-server-class-to-inherit-from-the-tcpserver-class">Create a custom server class to inherit from the TCPServer class</h4>
<p>Create a custom server class and make it inherit from the socketserver.TCPServer class. This is the first step in setting up a server, There are four basic servers available within the socketserver module namely TCPServer, UDPServer,UnixStreamServer and UnixDatagramServer</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">LabHttpTcpServer</span><span class="p">(</span><span class="n">socketserver</span><span class="o">.</span><span class="n">TCPServer</span><span class="p">):</span>
   <span class="n">allow_reuse_address</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div>

<h4 id="create-the-custom-httphandler-class">Create the custom HttpHandler class</h4>
<p>Create the custom HttpHandler class by inheriting the socketserver.StreamRequestHandler to handle incoming requests. We utilized the socketserver.StreamRequestHandler class, a subclass of socketserver.BaseRequestHandler  because it provides implementation for rfile and wfile.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">LabHttpTCPHandler</span><span class="p">(</span><span class="n">socketserver</span><span class="o">.</span><span class="n">StreamRequestHandler</span><span class="p">)</span>
</code></pre></div>

<h4 id="implement-the-handle-method">Implement the handle method</h4>
<p>This would involve some substeps</p>
<h5 id="receive-and-decode-request">Receive and decode request</h5>
<p>The rfile would be utilized to receive and decode the request sent from the client. Simply call the readline() method which calls the recv() method multiple times until a new character line is reached</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Receive and decode the request</span>
       <span class="n">request_line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rfile</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</code></pre></div>

<h5 id="extract-the-method-and-path-from-the-request-line">Extract the method and path from the request line</h5>
<p>The split method is used to divide the request into three different parts because the 2 ensure split is done only twice. The first line in a request_line always contains the HTTP METHOD  PATH and HTTP_Version.
For example GET  /index.html  HTTP/1.1 would be split into</p>
<div class="highlight"><pre><span></span><code>GET
/index.html
HTTP/1.1
</code></pre></div>

<p>The underscore is a convention used for values that would be ignored in our case the HTTP version</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Extract the method and path from the request</span>
       <span class="n">method</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">request_line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</code></pre></div>

<h5 id="extract-the-headers-and-store-in-a-dictionary">Extract the headers and store in a dictionary</h5>
<p>We created a custom method to handle this. We split the line using the colon delimiter to ensure the split is done on the content type</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parse_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
       <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
       <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
           <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rfile</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
           <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="p">:</span>
               <span class="k">break</span>
           <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
           <span class="n">headers</span><span class="p">[</span><span class="n">key</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
       <span class="k">return</span> <span class="n">headers</span>
</code></pre></div>

<h5 id="decide-the-action-to-take-based-on-the-http-method-type">Decide the action to take based on the Http method type</h5>
<p>All other method other than GET are met with a 405 error</p>
<h4 id="start-the-server">Start the server</h4>
<p>Start the server by calling the serve_forever method and pass the HOST, PORT</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
   <span class="k">with</span> <span class="n">LabHttpTcpServer</span><span class="p">((</span><span class="n">HOST</span><span class="p">,</span><span class="n">PORT</span><span class="p">),</span><span class="n">LabHttpTCPHandler</span><span class="p">)</span> <span class="k">as</span> <span class="n">server</span><span class="p">:</span>
       <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;server is starting&quot;</span><span class="p">)</span>
       <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;running&quot;</span><span class="p">)</span>
       <span class="n">server</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span> 
</code></pre></div>

<h3 id="task-3-testing">Task 3: Testing</h3>
<h4 id="scenario-1-ensure-that-your-custom-client-can-send-requests-to-your-custom-server-and-receive-the-expected-response">Scenario 1 : Ensure that your custom client can send requests to your custom server and receive the expected response</h4>
<p>You have implemented both a custom HTTP client and server. The server serves files from a directory and handles different types of HTTP requests (e.g., GET, POST).
Use your custom client to send a GET request to your custom server to retrieve a specific file (e.g., index.html).
Your client should receive the correct HTML content from the server, indicating that the file was successfully served. The response should include the correct status code (200 OK) and appropriate headers.</p>
<h4 id="scenario-2-verify-that-your-custom-client-can-interact-with-standard-servers-correctly-sending-requests-and-processing-responses">Scenario 2: Verify that your custom client can interact with standard servers, correctly sending requests and processing responses.</h4>
<p>Your custom client needs to be tested against a well-known, standard server like Google's web server. Use your custom client to send a GET request to google.com. Most servers (such as google) will only return a redirect to force your client to use encryption (HTTPS). If you test against a standard server like google, the client should receive a response containing the redirect.</p>
<p>Here are some standard HTTP test servers that support unencrypted HTTP/1.1. Make sure the servers correctly understand the GET and POST requests your client is making. Note these are all IPv4 only, because IST. These servers should return 200 OK. They also respond with a description of the way the server interpreted the request, so you can check that the server is interpreting it correctly.</p>
<ul>
<li>Dr. Campbell's<ul>
<li><a href="http://buttercup.cs.ualberta.ca:9000/">http://buttercup.cs.ualberta.ca:9000/</a> (get and post, IPv4 only)</li>
<li><a href="http://129.128.184.44:9000/">http://129.128.184.44:9000/</a></li>
</ul>
</li>
<li>Dr. Hindle's<ul>
<li><a href="http://webdocs.cs.ualberta.ca/~hindle1/1.py">http://webdocs.cs.ualberta.ca/~hindle1/1.py</a></li>
<li><a href="http://webdocs.cs.ualberta.ca/~hindle1/2.cgi">http://webdocs.cs.ualberta.ca/~hindle1/2.cgi</a></li>
<li><a href="http://129.128.243.190/~hindle1/1.py">http://129.128.243.190/~hindle1/1.py</a></li>
<li><a href="http://129.128.243.190/~hindle1/2.cgi">http://129.128.243.190/~hindle1/2.cgi</a></li>
</ul>
</li>
<li><a href="http://httpbin.org/get">http://httpbin.org/get</a> (get only)</li>
<li><a href="http://httpbin.org/post">http://httpbin.org/post</a> (post only)</li>
</ul>
<h4 id="scenario-3-ensure-that-standard-clients-web-browsers-postman-curl-can-communicate-with-your-custom-server-and-receive-the-correct-responses">Scenario 3: Ensure that standard clients (web browsers, Postman, curl) can communicate with your custom server and receive the correct responses.</h4>
<p>You want to verify that your custom server can handle requests from standard clients, such as <a href="https://www.postman.com/downloads/">Postman</a>.
Use Postman to send a GET request to your custom server to retrieve 'index.html'. Then, use a web browser and curl to perform the same test. 
Postman should receive the correct content, with appropriate status codes and headers.</p>
<h4 id="hints">Hints</h4>
<ul>
<li>For IPV6, use socket.AF_INET6 as the address family when creating the socket.</li>
<li>GET should not have a body, and since GET doesn't have a body it should not have a Content-Type header at all. Instead, when given arguments, GET should add them to the query part of the URL and send that along with the path when making the GET request.</li>
<li>When given vars, POST should include a body that is urlencoded and Content-Type: application/x-www-form-urlencoded .</li>
<li>The Wikipedia page on percent encoding actually has a great explanation of what characters are allowed. They are the unreserved characters. However, you need to also make sure you allow / (forward slash) in paths. https://en.wikipedia.org/wiki/Percent-encoding</li>
<li>It's better to percent-encode all reserved characters except the "/". For example, if the path has a folder or file name with a "?" in it, you wouldn't want it to prematurely end the path and start the query. Same for "#".</li>
<li>The port may not always be specified. In that case, the client must assume a default port value (which for HTTP is 80)</li>
<li>Use "Connection: close" header on both sides</li>
<li>Check the "Content-Type" header to see if the encoding is ISO-8859-1 or UTF-8 on the client</li>
<li>You can turn unicode into a byte string with Python's built-in .encode() method of strings. For example. "❤️".encode() produces b'\xe2\x9d\xa4\xef\xb8\x8f' and coincidentally the correct percent-encoding is %E2%9D%A4%EF%B8%8F</li>
<li>If a client sends a GET request to http://localhost:8000/index.html, the server should send them the contents of www/index.html in the HTTP response body.</li>
<li>If a client sends a GET request to http://localhost:8000/base.css, the server should send them the contents of www/base.css in the HTTP response body.</li>
<li>If a client sends a GET request to http://localhost:8000/deep/index.html, the server should send them the contents of www/deep/index.html in the HTTP response body.</li>
<li>If a client sends a GET request to http://localhost:8000/deep/, the server should send them the contents of www/deep/index.html in the HTTP response body. (the url ends with a / and deep is a directory, therefore the specifications say to return the index.html file in the deep directory), you would also need to additionally send the correct redirect related headers and status code that would go to the index.html equivalent of the directory it's requesting.</li>
<li>The names of the directories/files aren't restricted to the files autogenerated. If I put a file in the www folder at www/test/test2/test3.css, then it should be accessible at http://localhost:8000/test/test2/test3.css</li>
<li>To get an overview of HTTP requests and response you can visit-  https://developer.mozilla.org/en-US/docs/Web/HTTP </li>
</ul>
<h3 id="restrictions">Restrictions</h3>
<p>Violation of the restrictions will result in a mark of zero.</p>
<ul>
<li>Must use Python3</li>
<li>Must run on Ubuntu (Use the undergrad lab machines, for example the ones in CSC 2-29 or install an Ubuntu VM to check this)</li>
<li>Must work with Firefox</li>
<li>The only allowed imports are <code>socketserver</code>, <code>re</code>, <code>socket</code>, <code>pathlib</code>, and <code>argv</code>: You will receive a zero mark for using any other imports/libraries.<ul>
<li><code>re</code> library is optional, only use it if you know regular expressions.</li>
<li>Use of <code>urllib</code>, <code>http</code>, <code>requests</code>, and similar libraries is extra double forbidden and will result in a mark of <code>-0.0</code>. Please do not ask to use these libraries, they defeat the purpose of the assignment.</li>
</ul>
</li>
<li>Your code must not modify the code out of its scope (must not do dependency injection), must not run anything at the top level (outside of functions/classes/defining constants), and must not try to work around or modify the test suite.</li>
</ul>
<h3 id="submission-instructions">Submission Instructions</h3>
<p>Make sure you push to GitHub classroom <strong>BEFORE 4PM on the day of your lab section!</strong> You will not be able to push after that!</p>
<p>Submit a link to your repo in the form <code>https://github.com/uofa-cmput404/w24-h0x-labsignment-http-yourgithubname</code> on eClass. <strong>Do not</strong> submit a link to a branch, a file, or the clone URL. If you do not do this we will not know which GitHub submission is yours.</p>
<h3 id="tips">Tips</h3>
<h4 id="ubuntu-on-windows">Ubuntu on Windows</h4>
<p>Install Ubuntu on Windows using WSL2. </p>
<p>Installing Ubuntu on Windows</p>
<p>Step 1-  Search for Windows PowerShell in your Windows search bar, then select Run as administrator.</p>
<p>At the command prompt type:
wsl --install
And wait for the process to complete.
For WSL to be properly activated, you will now need to restart your computer.</p>
<p>Step 2- WSL supports a variety of Linux distributions, including the latest Ubuntu release, Ubuntu 20.04 LTS and Ubuntu 18.04 LTS. You can find them by opening the Microsoft store app and searching for Ubuntu.</p>
<p>Choose the distribution you prefer and then click on Get.</p>
<p>Ubuntu will then install on your machine.</p>
<p>The one line install!</p>
<p>There is a single command that will install both WSL and Ubuntu at the same time.</p>
<p>When opening PowerShell for the first time, simply modify the initial instruction to:</p>
<p>wsl --install -d ubuntu</p>
<p>This will install both WSL and Ubuntu! Don’t forget to restart your machine before continuing.</p>
<p>Once installed, you can either launch the application directly from the store or search for Ubuntu in your Windows search bar.</p>
<p>Step-3 Configure Ubuntu</p>
<p>Congratulations, you now have an Ubuntu terminal running on your Windows machine!</p>
<p>If Ubuntu returns an error during this initial installation, then the most common issue is that virtualisation is disabled in your device’s BIOS menu. You will need to turn this on during your device’s boot sequence. The location of this option varies by manufacturer, so you will need to refer to their documentation to find it.
Once Ubuntu has finished its initial setup you will need to create a username and password (this does not need to match your Windows user credentials).</p>
<p>Finally, it’s always good practice to install the latest updates with the following commands, entering your password when prompted.</p>
<p>sudo apt update</p>
<p>Then</p>
<p>sudo apt upgrade</p>
<p>Press Y when prompted.</p>
<p>Step - 4 Install your first package</p>
<p>Installing packages on Ubuntu is as easy as using a single command. Below, you will see how to install bpython, a simple python interpreter for trying out ideas, featuring some nice usability features like expected parameters and autocompletion.
To check that you have the latest package lists, type:</p>
<p>sudo apt update</p>
<p>Then install bpython:</p>
<p>sudo apt install bpython</p>
<p>To run the application type:</p>
<p>bpython</p>
<p>And you’re ready to go!</p>
<p>Step- 5 Customizing your terminal with Windows Terminal Preview</p>
<p>Since you’re likely to be using your Ubuntu terminal a fair bit, it’s always nice to do some customisation. We recommend installing Windows Terminal Preview to get the most user-friendly setup. You can find it in the Microsoft Store. </p>
<p>Windows Terminal allows you to open multiple Terminal instances as tabs, so you can have PowerShell running alongside Ubuntu. It also includes a number of customisation options. In the below screenshot, we’ve changed the tab name and color, and configured the terminal appearance to use the Tango Dark theme and the Ubuntu font!</p>
<p>These customisations can be applied universally using the Appearance menu in Settings or to individual profiles which each have their own Appearance menu. Try it yourself to find something you feel comfortable with!</p>
<h4 id="ubuntu-on-macos-arm">Ubuntu on macOS ARM:</h4>
<ol>
<li>Install UTM for macOS: https://mac.getutm.app/</li>
<li>Download Ubuntu image for ARM: https://ubuntu.com/download/server/arm</li>
<li>Open the UTM app and Select "Create a New Virtual Machine"</li>
<li>Select "Virtualize" followed by "Linux"</li>
<li>Browse for the Ubuntu iso file you downloaded</li>
<li>Select your desired VM memory and CPU configs</li>
<li>Give your VM a name and select "Save"</li>
<li>Run the VM</li>
<li>Follow the onscreen prompts, default options are sufficient</li>
<li>Once the configuration is complete, shutdown the VM and dismount the iso file</li>
<li>Start and log into your VM</li>
<li>Run: <code>sudo apt install ubuntu-desktop</code> and <code>reboot</code>
You should now have access to Ubuntu desktop.</li>
</ol>
<p>For more details, you can read <a href="https://jun1okamura.medium.com/install-ubuntu-on-mac-m1-powered-by-utm-499aba3ba7e9">this</a>.</p>
<h4 id="for-macos-with-homebrew">For macOS with homebrew:</h4>
<ol>
<li><code>brew install git</code></li>
<li><code>brew install python@3</code></li>
<li><code>sudo pip3 install virtualenv</code></li>
<li>In your repository directory, <code>virtualenv venv --python=python3</code></li>
<li>Activate the virtual environment: <code>source venv/bin/activate</code></li>
<li>Install requests: <code>pip3 install requests</code></li>
</ol>
<h4 id="for-windows-10-with-pip">For Windows 10 with pip:</h4>
<p>Installing Python for Windows</p>
<p>Step 1- Downloading the Python Installer</p>
<p>Go to the official Python download page for Windows.
Find a stable Python 3 release. This tutorial was tested with Python version 3.10.10.
Click the appropriate link for your system to download the executable file: Windows installer (64-bit) or Windows installer (32-bit).</p>
<p>Step 2- Running the Executable Installer</p>
<ol>
<li>
<p>After the installer is downloaded, double-click the .exe file, for example python-3.10.10-amd64.exe, to run the Python installer.</p>
</li>
<li>
<p>Select the Install launcher for all users checkbox, which enables all users of the computer to access the Python launcher application.</p>
</li>
<li>
<p>Select the Add python.exe to PATH checkbox, which enables users to launch Python from the command line.</p>
</li>
<li>
<p>If you’re just getting started with Python and you want to install it with default features as described in the dialog, then click Install Now and go to Step 4 - Verify the Python Installation. To install other optional and advanced features, click Customize installation and continue.</p>
</li>
<li>
<p>The Optional Features include common tools and resources for Python and you can install all of them, even if you don’t plan to use them.</p>
</li>
</ol>
<p>Select some or all of the following options:</p>
<p>Documentation: recommended</p>
<p>pip: recommended if you want to install other Python packages, such as NumPy or pandas</p>
<p>tcl/tk and IDLE: recommended if you plan to use IDLE or follow tutorials that use it</p>
<p>Python test suite: recommended for testing and learning</p>
<p>py launcher and for all users: recommended to enable users to launch Python from the command line</p>
<ol>
<li>
<p>Click Next.</p>
</li>
<li>
<p>The Advanced Options dialog displays.</p>
</li>
</ol>
<p>Select the options that suit your requirements:</p>
<p>Install for all users: recommended if you’re not the only user on this computer</p>
<p>Associate files with Python: recommended, because this option associates all the Python file types with the launcher or editor</p>
<p>Create shortcuts for installed applications: recommended to enable shortcuts for Python applications</p>
<p>Add Python to environment variables: recommended to enable launching Python</p>
<p>Precompile standard library: not required, it might down the installation</p>
<p>Download debugging symbols and Download debug binaries: recommended only if you plan to create C or C++ extensions</p>
<p>Make note of the Python installation directory in case you need to reference it later.</p>
<ol>
<li>
<p>Click Install to start the installation.</p>
</li>
<li>
<p>After the installation is complete, a Setup was successful message displays.</p>
</li>
</ol>
<p>Step 3- Adding Python to the environment variables.</p>
<p>Skip this step if you selected Add Python to environment variables during installation.
If you want to access Python through the command line but you didn’t add Python to your environment variables during installation, then you can still do it manually.
Before you start, locate the Python installation directory on your system. The following directories are examples of the default directory paths:</p>
<p>C:\Program Files\Python310: if you selected Install for all users during installation, then the directory will be system wide</p>
<p>C:\Users\Sammy\AppData\Local\Programs\Python\Python310: if you didn’t select Install for all users during installation, then the directory will be in the Windows user path</p>
<p>Note that the folder name will be different if you installed a different version, but will still start with Python.</p>
<p>Go to Start and enter advanced system settings in the search bar.</p>
<p>Click View advanced system settings.</p>
<p>In the System Properties dialog, click the Advanced tab and then click Environment Variables.
Depending on your installation:</p>
<p>If you selected Install for all users during installation, select Path from the list of System Variables and click Edit.
If you didn’t select Install for all users during installation, select Path from the list of User Variables and click Edit.
Click New and enter the Python directory path, then click OK until all the dialogs are closed.</p>
<p>Step-4 Verify Python Installation</p>
<p>You can verify whether the Python installation is successful either through the command line or through the Integrated Development Environment (IDLE) application, if you chose to install it.
Go to Start and enter cmd in the search bar. Click Command Prompt</p>
<p>Enter the following command in the command prompt:</p>
<p>python --version</p>
<p>You can also check the version of Python by opening the IDLE application. Go to Start and enter python in the search bar and then click the IDLE app, for example IDLE (Python 3.10 64-bit).</p>
<p>You’ve successfully installed Python on your Windows system.</p>
<p>In cmd (not powershell):</p>
<ol>
<li>pip install requests</li>
<li>pip install virtualenv</li>
<li>In your repository directory, <code>virtualenv venv --python=python3</code><ul>
<li>if you get the error "virtualenv not found" try forcing a reinstall with pip install virtualenv --force-reinstall
4 To activate: venv\Scripts\activate</li>
</ul>
</li>
</ol>
<p>As of 2018 all Windows 10 machines come pre-installed with curl, so you should have it already.  </p>
<h4 id="ubuntu-lab-computers">Ubuntu Lab Computers</h4>
<p>Connect to one of the lab machines at the University if needed. </p>
<p>They are named like <code>ug01.cs.ualberta.ca</code>, <code>ug02.cs.ualberta.ca</code>, all the way up to <code>ug34.cs.ualberta.ca</code>:</p>
<p><code>ssh yourccid@ugXX.cs.ualberta.ca</code></p>
<p>For example:</p>
<p><code>ssh hazelcam@ug15.cs.ualberta.ca</code></p>
<p>To quit the ssh connection to the lab machine, use the exit command or press control-D on a blank prompt. If that does not work you can force close the connection by pressing enter, then ~, then .</p>
<p><strong>Want to view stuff in terminal but it scrolled off the top of the page?</strong></p>
<p>Try using the more command to scroll page by page. For example, you can pipe the output of curl to more to scroll through the output of curl page by page:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-s<span class="w"> </span>url<span class="w"> </span><span class="p">|</span><span class="w"> </span>more
</code></pre></div>

<p>(The <code>-s</code> option to curl prevents curl from displaying download progress. You can combine it with other curl options like <code>-i</code> and <code>-L</code>.)</p>
  <footer>
    <p>Published: <time datetime="2024-07-17T00:00:00-06:00">
      Wed, 17 Jul 2024 at 00:00 MDT
    </time></p>
    <address>
      By           <a href="../author/hazel-victoria-campbell.html">Hazel Victoria Campbell</a>
          <a href="../author/samuel-iwuchukwu.html">Samuel Iwuchukwu</a>
          <a href="../author/sadia-zahin-prodhan.html">Sadia Zahin Prodhan</a>
    </address>
    <p>
        Category: <a href="../category/labsignments.html">labsignments</a>
    </p>
    <p>
        Tags:
            <a href="../tag/curl.html">curl</a>
            <a href="../tag/http.html">http</a>
            <a href="../tag/socket.html">socket</a>
            <a href="../tag/socketserver.html">socketserver <!-- @LT-IGNORE:MORFOLOGIK_RULE_EN_CA(http)@ --></a>
    </p>
  </footer>
  </article>
        </main>
        <footer>
                <address>
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>,
                which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address>
        </footer>
</body>
</html>